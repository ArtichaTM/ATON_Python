# Установка
## Требования
Python3.12
## Шаги
см. [install](install)
# Информация
**Внимание! С графом можно взаимодействовать! Используется библиотека [Plotly](https://plotly.com/javascript/)**
## Скриншоты сайта
<details>
  <summary>Скриншоты</summary>

Первый заход на сайт
![enter](readme\enter.png)
Две валюты
![two_values](readme\two_values.png)
Всевозможные валюты и даты
![all_values](readme\all_values.png)
</details>

## Скорость работы
**2024-05-01** был произведён тест скорости работы сайта
- **18:57:20,116**: Запущен процесс обновления
- **18:57:22,226**: Список валют загружен
- **19:08:37,089**: Загружены все валюты

Информация:
- Загружено **42** валюты
- Вставлено **171 418** строчек информации об изменение валюты на определённый день
## Общая информация
- Весь код, комментарии, описание функций/методов/классов на английском. Только readme.md на русском.
- При первом запуске сервера, или любой другой команды после migrate параллельно с потоком django будет запускаться поток updater, который обновляет данные на лету
- Статус обновления можно посмотреть в файле *[логов](currencys/logging/log.log)*
- Валюта, которая не имеет ссылки или не отображается в [получении курсов по дню](https://www.finmarket.ru/currency/rates/?id=10148#archive)
- С задержкой в 1 секунду между запросами к [finmarket](https://www.finmarket.ru) (анти-спам) и скоростью интернета 100мбит/с полное обновление базы данных длилось 3 часа, 39 минут и 24 секунд. В таблицу всего вставлено 171460 строчек данных на каждый день (доступных с сайта [finmarket](https://www.finmarket.ru)) и для каждой валюты (обновилось 42).
- Задержка запросов задаётся вручную [при создании Updater()](currencys\currency\apps.py)
- Обновление базы данных происходит при каждом запросе к manage.py, однако обновление происходит в отдельном потоке, помеченный как daemon, что позволяет не беспокоиться об успешном закрытие программы
- Все вставки в БД выполняются с помощью [bulk_create()](https://docs.djangoproject.com/en/5.0/ref/models/querysets/#bulk-create), что является быстрым и тяжело прерываемым (с последующими проблемами) способом занесения данных в БД
# Известные баги
- Валюта "[СДР (спец. прав заим-я)](https://www.finmarket.ru/currency/details/?val=52164)" не обновляется, фикс не планируется так как в *[Классификаторе валют](https://www.finmarket.ru/currency/banknotes/)* данная банкнота не выделяется, хотя в обновлениях на днях ([пример](https://www.finmarket.ru/currency/rates/?id=10148&pv=0&bd=1&bm=5&by=2024&x=27&y=17#archive)) она иногда всплывает
